define("@widget/APPOINTMENTS/c/bs-ServiceList2-a14b04ed.js",["exports","~/c/bs-AppointmentsSection","~/c/bs-onServiceClick","~/c/bs-DurationAndCost","~/c/bs-index","~/c/bs-TrackImpression"],(function(e,t,a,r,o,s){"use strict";var i="expandToFill";class c extends(global.React||guac.react).Component{render(){const{assetUrl:e,assetStyles:a,imageCropMethod:r}=this.props,{Element:{Block:o},Component:{Background:s}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,c={outer:{position:"relative",paddingTop:"75%",paddingRight:"100%",...a},inner:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",backgroundSize:r===i?"cover":"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}};return(global.React||guac.react).createElement(o,{style:c.outer,"data-aid":t.g.SERVICE_LIST_ITEM_ASSET},(global.React||guac.react).createElement(s,{backgroundImage:e,style:c.inner}))}}c.propTypes={assetUrl:(global.PropTypes||guac["prop-types"]).string,assetStyles:(global.PropTypes||guac["prop-types"]).obj,imageCropMethod:(global.PropTypes||guac["prop-types"]).string};var n=c;const l=e=>{let{service:r,navigate:o,renderMode:s,...i}=e;const{Element:{Button:c}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2;return(global.React||guac.react).createElement(c.Spotlight,t._({onClick:()=>a.o(r,o,s)},i))};l.propTypes={service:(global.PropTypes||guac["prop-types"]).object.isRequired,navigate:(global.PropTypes||guac["prop-types"]).func.isRequired,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired};var p=l;const g={serviceListItem:{display:"flex",justifyContent:"space-between",width:"100%",paddingBottom:"xxlarge","@xs-only":{flexDirection:"column"}},titleAndDetails:{flexGrow:"1",flex:"1",minWidth:"0","@sm":{marginTop:"-xsmall"}},descriptionDesktop:{marginTop:"xxsmall",marginBottom:"0","@xs-only":{display:"none"}},descriptionMobile:{marginTop:"xxsmall",marginBottom:"small","@sm":{display:"none"}},buttonWrapper:{"@xs-only":{width:"auto"},"@sm":{flexShrink:"0",marginLeft:"medium",maxWidth:"33.33333333333333%"},"@md":{maxWidth:"25%"}},button:{"@xs-only":{width:"auto",paddingHorizontal:"small"},"@sm":{paddingHorizontal:"small"},"@md":{paddingHorizontal:"small"},"@lg":{paddingHorizontal:"small"}},descriptionStyles:{container:{display:"block",marginTop:"xxsmall"},truncated:{wordWrap:"break-word"},expanded:{wordWrap:"break-word"},moreLink:{display:"block",marginTop:"xxsmall"}}};class d extends(global.React||guac.react).Component{assetStyles(){const{imageCropMethod:e,widgetCategory:t}=this.props;return{backgroundColor:"!rgba(255,255,255,.2)",borderWidth:e===i||"neutral"!==t?"0":"1px",borderStyle:"solid",borderColor:"section","@xs-only":{width:"100%",marginBottom:"xsmall"},"@sm":{width:"120px",flexShrink:"0",marginRight:"medium"},"@md":{width:"145px"},"@lg":{width:"170px"}}}render(){const{service:e,maxServiceDescriptionEllipseCharacters:a,navigate:s,staticContent:i,callToActionText:c,imageCropMethod:l,renderMode:d}=this.props,{Element:{Block:m,Heading:u,Details:S,MoreLink:y,Text:h}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,{dateTimeFormatter:b}=t.F.getState(),C=Boolean(e.image_url),T=a/2,E={...g.serviceListItem,"@sm":{alignItems:e.description&&e.description.length?"flex-start":"center"}},v={isCollapsible:!0,style:g.descriptionStyles,expandCtaAs:y.Expand,onClickMore:()=>t.t(t.aC),onExpandCtaMount:()=>t.t(t.aD),i18n:{expandCta:i.more,collapseCta:i.less}};return(global.React||guac.react).createElement(m,{style:E},C&&(global.React||guac.react).createElement(m,{style:this.assetStyles()},(global.React||guac.react).createElement(n,{imageCropMethod:l,assetUrl:e.image_url})),(global.React||guac.react).createElement(m,{style:g.titleAndDetails},(global.React||guac.react).createElement(u.Product,{"data-aid":t.g.SERVICE_LIST_ITEM_SERVICE_NAME},e.name),(global.React||guac.react).createElement(r.D,{service:e,staticContent:i,as:S,withPaymentLabels:!1}),t.$(e.recurrence_type)&&(global.React||guac.react).createElement(S,{"data-aid":t.g.SERVICE_LIST_ITEM_SERVICE_EVENT_DATE},b.formatDateTime(e.start_time)),(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement(h,{style:g.descriptionDesktop,"data-aid":t.g.SERVICE_LIST_ITEM_SERVICE_DESCRIPTION},(global.React||guac.react).createElement(o.l.Truncate,t._({},v,{maxEllipseCharacters:a}),e.description)),(global.React||guac.react).createElement(h,{style:g.descriptionMobile,"data-aid":t.g.SERVICE_LIST_ITEM_SERVICE_DESCRIPTION_MOBILE},(global.React||guac.react).createElement(o.l.Truncate,t._({},v,{maxEllipseCharacters:T}),e.description)))),(global.React||guac.react).createElement(m,{style:g.buttonWrapper},(global.React||guac.react).createElement(p,{"data-aid":t.g.SERVICE_LIST_ITEM_BOOK_BUTTON,style:g.button,"data-route":t.ap.CTA,size:"small",navigate:s,service:e,renderMode:d},c||i.book)))}}d.propTypes={service:(global.PropTypes||guac["prop-types"]).object,maxServiceDescriptionEllipseCharacters:(global.PropTypes||guac["prop-types"]).number.isRequired,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,callToActionText:(global.PropTypes||guac["prop-types"]).string.isRequired,imageCropMethod:(global.PropTypes||guac["prop-types"]).string,widgetCategory:(global.PropTypes||guac["prop-types"]).string,navigate:(global.PropTypes||guac["prop-types"]).func.isRequired,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired};const m={categoryName:{marginBottom:"large"},categorySeparator:{marginBottom:"xlarge"},seeAll:{marginBottom:"xlarge",cursor:"pointer"}};class u extends(global.React||guac.react).Component{constructor(e){super(e),this.state={areAllCategoryServicesShown:!1},this.onSeeAllClick=this.onSeeAllClick.bind(this)}onSeeAllClick(){this.setState({areAllCategoryServicesShown:!0})}isSeeAllLinkShown(){const{areAllCategoryServicesShown:e}=this.state,{category:{services:t},maxServicesShown:a}=this.props;return!e&&t.length>a}getShownServices(e){const{maxServicesShown:t}=this.props;let{category:{services:a}}=this.props;return e&&(a=a.slice(0,t)),a}render(){const{category:e,hasSeparator:a,maxServiceDescriptionEllipseCharacters:r,onServiceClick:o,staticContent:s,callToActionText:i,imageCropMethod:c,widgetCategory:n,navigate:l,renderMode:p}=this.props,{Element:{Block:g,Heading:u,MoreLink:S,HR:y}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,h=this.isSeeAllLinkShown(),b=this.getShownServices(h);return b.length?(global.React||guac.react).createElement(g,null,a&&(global.React||guac.react).createElement(y,{"data-aid":t.g.CATEGORY_SEPARATOR,style:m.categorySeparator}),e.name&&(global.React||guac.react).createElement(u.Middle,{"data-aid":t.g.CATEGORY_NAME,tag:"h3",style:m.categoryName},e.name),b.map((e=>(global.React||guac.react).createElement(d,{key:e.id,service:e,staticContent:s,callToActionText:i,maxServiceDescriptionEllipseCharacters:r,onServiceClick:o,imageCropMethod:c,widgetCategory:n,navigate:l,renderMode:p}))),h&&(global.React||guac.react).createElement(S.Expand,{"data-aid":t.g.CATEGORY_SEE_ALL_LINK,onClick:this.onSeeAllClick,style:m.seeAll,tag:"span"},s.seeAll)):null}}u.propTypes={category:(global.PropTypes||guac["prop-types"]).shape({id:(global.PropTypes||guac["prop-types"]).number,name:(global.PropTypes||guac["prop-types"]).string,services:(global.PropTypes||guac["prop-types"]).array.isRequired}).isRequired,maxServicesShown:(global.PropTypes||guac["prop-types"]).number.isRequired,maxServiceDescriptionEllipseCharacters:(global.PropTypes||guac["prop-types"]).number.isRequired,hasSeparator:(global.PropTypes||guac["prop-types"]).bool,onServiceClick:(global.PropTypes||guac["prop-types"]).func,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,callToActionText:(global.PropTypes||guac["prop-types"]).string.isRequired,imageCropMethod:(global.PropTypes||guac["prop-types"]).string,widgetCategory:(global.PropTypes||guac["prop-types"]).string,navigate:(global.PropTypes||guac["prop-types"]).func.isRequired,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired},u.defaultProps={hasSeparator:!0};const S={timeZone:{display:"block",marginTop:"large",textAlign:"center",fontColor:"lowContrast"},error:{width:"100%",marginBottom:"medium",marginTop:"xxlarge",textAlign:"center",font:"alt",fontColor:"error"}};class y extends(global.React||guac.react).Component{constructor(e){super(e),t.a(this,"isServicesSectionShown",(e=>{let{areServicesShown:t,areServicesComingShown:a}=e;return t||a})),this.onStoreChange=this.onStoreChange.bind(this),this.state=this.getStoreState()}getStoreState(){const e=t.C.getState(),a=t.S.getState(),r=t.aj.getState();return{...a,error:e.error||a.error||r.error,isFetching:e.isFetching||a.isFetching||r.isFetching,categories:r.categories,timeZone:e.timeZone,maxServicesPerCategory:e.appointments2_max_services_per_category,maxUncategorizedServices:e.appointments2_max_uncategorized_services,maxServiceDescriptionEllipseCharacters:e.appointments2_max_service_description_ellipse_characters,websiteId:e.websiteId}}componentDidMount(){t.C.addListener("change",this.onStoreChange),t.S.addListener("change",this.onStoreChange),t.aj.addListener("change",this.onStoreChange);const{areServicesHidden:e}=this.props;t.t(t.aF),e||setTimeout((()=>{t.ak().then((e=>e&&a.f())).then((e=>{if(!e)return;const{services:a,categories:r}=this.state;t.aE(a,r)}))}),0)}componentWillUnmount(){t.C.removeListener("change",this.onStoreChange),t.S.removeListener("change",this.onStoreChange),t.aj.removeListener("change",this.onStoreChange)}componentDidUpdate(){!this.hasLoggedListImpression&&this.state.services.length&&(t.t(t.au),this.hasLoggedListImpression=!0)}onStoreChange(){this.setState(this.getStoreState())}getMaxServicesShown(){const{categorizedServices:e,maxUncategorizedServices:t,maxServicesPerCategory:a}=this.state;return 1===e.length&&null===e[0].id?t:a}isErrorShown(){const{error:e}=this.state,{renderMode:a,isGetStartedCtaDisplayed:r}=this.props;return!!e&&(!r&&![t.r.ADD,t.r.DISPLAY,t.r.SAMPLE].includes(a))}render(){const{isSampleDataUsed:e,staticContent:r,callToActionText:o,imageCropMethod:i,widgetCategory:c,isGetStartedCtaDisplayed:n,areServicesHidden:l,navigate:p,renderMode:g,section:d}=this.props,{isFetching:m,areServicesLoaded:y,areServicesCategorized:h,services:b,maxServiceDescriptionEllipseCharacters:C}=this.state;let{categorizedServices:T}=this.state;const{Element:{Text:E},Component:{Grid:v,Grid:{Cell:x},PlaceholderMessage:R}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,w=t.D.Translate(r),{dateTimeFormatter:_}=t.F.getState(),P=l||y&&h,M=!l&&T.length&&b.length||e;return e&&(T=[{id:0,name:null,services:[{name:w("editorSampleServices.first.name"),cost_type:s.c.FREE,cost:"0",description:w("editorSampleServices.first.description"),duration:"PT15M",id:1},{name:w("editorSampleServices.second.name"),cost_type:s.c.COST,cost:"10.0",description:w("editorSampleServices.second.description"),duration:"PT1H",id:2},{name:w("editorSampleServices.third.name"),cost_type:s.c.CUSTOM_TEXT,custom_cost_text:w("editorSampleServices.third.customCostText"),description:w("editorSampleServices.third.description"),duration:"PT30M",id:3}]}]),(global.React||guac.react).createElement(v,{xs:1,sm:6},(global.React||guac.react).createElement(x,{xs:1,sm:M?4:6,pushSm:M?1:0},this.isServicesSectionShown({areServicesShown:M,areServicesComingShown:P})&&(global.React||guac.react).createElement(a.C,null,M?T.map(((e,t)=>(global.React||guac.react).createElement(u,{key:e.id||"uncategorized",category:e,maxServicesShown:this.getMaxServicesShown(),maxServiceDescriptionEllipseCharacters:C,hasSeparator:t>0&&!(t===T.length-1&&!e.services.length),staticContent:r,callToActionText:o,imageCropMethod:i,widgetCategory:c,navigate:p,renderMode:g}))):P&&(global.React||guac.react).createElement(R,{section:"default"===d?"alt":"default",message:r.servicesCommingSoon,textProps:{"data-aid":t.g.SERVICE_LIST_NO_SERVICES,style:{fontSize:"large"}}})),this.isErrorShown()&&(global.React||guac.react).createElement(E,{style:S.error,"data-aid":t.g.SERVICE_LIST_ERROR},r.defaultError),b.some((e=>t.$(e.recurrence_type)))&&!n&&(global.React||guac.react).createElement(E,{"data-aid":t.g.SERVICE_LIST_TIME_ZONE,style:S.timeZone},_.getTimeZoneDisplayName()),(global.React||guac.react).createElement(t.c,{fetching:m})))}}y.propTypes={renderMode:(global.PropTypes||guac["prop-types"]).string,navigate:(global.PropTypes||guac["prop-types"]).func,isSampleDataUsed:(global.PropTypes||guac["prop-types"]).bool,isGetStartedCtaDisplayed:(global.PropTypes||guac["prop-types"]).bool,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,callToActionText:(global.PropTypes||guac["prop-types"]).string,imageCropMethod:(global.PropTypes||guac["prop-types"]).string,widgetCategory:(global.PropTypes||guac["prop-types"]).string,areServicesHidden:(global.PropTypes||guac["prop-types"]).bool.isRequired,olaFbPixelId:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string},e.default=y})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-ServiceList2-a14b04ed.js.map
